<!DOCTYPE html>
<html lang="en">

<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title> {{ baseDir }} </title>
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">


</head>

<body>
    <div class="container-full">
        <div class="row">
            <div class="col-lg-12 text-center v-center">
                <p class="lead"> {{ title }} </p>
                <br>
                <br>
                <br>
                <form class="col-lg-12" action="{{url_for('prereg')}}" method="POST">
                    <div class="input-group" style="width:340px;text-align:center;margin:0 auto;">
                        <input class="form-control input-lg"
                            title="Don't worry. We hate spam, and will not share your email with anyone."
                            placeholder="Enter your email address" type="email" name="email">
                        <span class="input-group-btn"><button class="btn btn-lg btn-primary"
                                type="submit">GO</button></span>
                    </div>
                </form>
            </div>

        </div>
        <!-- /row -->
        <div class="row">
            <div class="col-lg-12 text-center v-center">
                <p class="lead">Email List</p>
                <br>
                <title>Dynamic Table</title>
                <div class="row justify-content-center">
                    <div class="col-auto" id="emailTable">
                    </div>
                </div>
                <script>
                    var getJSON = function (url, callback) {
                        var xhr = new XMLHttpRequest();
                        xhr.open('GET', url, true);
                        xhr.responseType = 'json';

                        xhr.onload = function () {

                            var status = xhr.status;

                            if (status == 200) {
                                callback(null, xhr.response);
                            } else {
                                callback(status);
                            }
                        };
                        xhr.send();
                    };

                    getJSON(document.location + '{{ baseURL }}getdata', function (err, data) {

                        if (err != null) {
                            console.error(err);
                        } else {

                            var html = '<table class="table table-dark">  <thead>  <tr> ' + '<th>' + " ID " + "</th>" + '<th>' + " EMAIL " + "</th>" + "</tr>   </thead><tbody>";
                            for (var i = 0; i < data.length; i++) {
                                html += "<tr>" +
                                    "<td>" + data[i].id + "</td>" +
                                    "<td>" + data[i].email + "</td>" + "</tr>";
                            }
                            html += "</tbody></table>";
                        } $("#emailTable").html(html);
                    });


                </script>
                <style type="text/css">
                    body {
                        margin: 30px;
                    }
                </style>
                </head>

                <body>
                    <table id="myTable" border="1">
                    </table>
                    <form>
                    </form>
                </body>
            </div>

        </div>
        <!-- /row -->
        <div class="row">
            <div class="col-lg-12 text-center v-center" style="font-size:39pt;">
                <a href="https://github.com/smrcascao/python-postgres-openshift-workshop" class="icoGithub"
                    title="gitHub"><i class="fa fa-github"></i></a>
                <a href="https://twitter.com/smrcascao" class="icoTwitter" title="Twitter"><i
                        class="fa fa-twitter"></i></a>
            </div>
        </div>
        <br>
        <br>
        <br>
    </div>


    <!-- script references -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</body>

</html>
